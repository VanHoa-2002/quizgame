<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/game.css">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
</head>
<body>
    <section>
        <h1>Math quiz game :))</h1>
        <div class="centerdiv">
            <div class="box">
                <p style="color: rgb(226, 115, 11);">Time &nbsp;&nbsp;&nbsp;Score</p>
                <input type="text" id="time" disabled>
                <input type="text" id="score" disabled>
            </div>
            <div class="insertBox">
                <div class="box1">
                    <input type="text" id="v1" disabled>
                </div>
                <div class="box1">
                    <input type="text" id="v3" disabled>
                </div>
                <div class="box1">
                    <input type="text" id="v2"disabled >
                </div>
            </div>
            <div class="middleBox">
                <input type="text" id="answ">
            </div>
            
            <div class="sentBox">
                <button onclick="jsgame()">Check answer</button>
            </div>
        </div>
        <audio src="assets/sound/DING.mp3" id="audi1"></audio>
        <audio src="assets/sound/FAIL.mp3" id="audi2"></audio>
    </section>
</body>
</html>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.1/howler.min.js"></script> -->
<script>
//    hàm lấy operator ngẫu nhiên 
   function getRandomOperator() {
    let operators = ["+", "-", "*"];
    let ran = Math.floor(Math.random() * operators.length);
    return operators[ran];
    }

    let n1=Math.floor(Math.random()*10+1);
    let n2=Math.floor(Math.random()*10+1);
    let operator = getRandomOperator();
function toan(){
    let cal = n1 + " " + operator + " " + n2;
    return cal;
}

    document.getElementById('v2').value=n2;
    document.getElementById('v1').value=n1;
    document.getElementById('v3').value=operator;
var result=0;
// console.log(toan());
    function getResult() {
        var result=eval(toan());
        return result;
    }
    var count=11;
    var counter=setInterval(time, 1000); 
    function time()
    {
        count=count-1;
        if (count <= -1)
    {
        document.getElementById('audi2').play();
            alert(`Your score is ${score} point, correct answer is ${getResult()} .Try Again`); 
            clearInterval(counter);
            location.reload();
        return;
    }
 document.getElementById("time").value=count; // watch for spelling
}   
    let score=0;
    // console.log(getResult());

    const jsgame=()=>{
        var answer=document.getElementById('answ').value;
    if(answer==getResult()){
        score+=10;
        document.getElementById("score").value = score;
        document.getElementById('audi1').play();  
        alert('Well done! Your answer is correct.');
        clearInterval(counter);
        time();   
        answer=document.getElementById('answ').value="";
        n1=Math.floor(Math.random()*10+1);
        n2=Math.floor(Math.random()*10+1);
        operator = getRandomOperator();
        count=11;
        counter=setInterval(time, 1000);
        toan();
        document.getElementById('v2').value=n2;
        document.getElementById('v1').value=n1;
        document.getElementById('v3').value=operator;  
        console.log(getResult()); 
        }
        else{
            document.getElementById('audi2').play();
            alert(`Your score is ${score} point, correct answer is ${getResult()}.Try Again`); 
            location.reload();
        }
    }
</script>